<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Moving to production - Breez SDK - Greenlight</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../styles.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Breez SDK - Greenlight</h1>

                    <div class="right-buttons">
                        <a href="https://github.com/breez/breez-sdk-docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/breez/breez-sdk-docs/edit/main/src/guide/production.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="moving-to-production"><a class="header" href="#moving-to-production">Moving to production</a></h1>
<p>To move your project to production, you will have to replace the evaluation invite code with a partner certificate issued by Greenlight.</p>
<custom-tabs category="lang">
<div slot="title">Rust</div>
<section>
<pre><code class="language-rust ignore">// Read in your Greenlight credentials from the file
// system, environment variable or build config
let developer_key: Vec&lt;u8&gt; = vec![];
let developer_cert: Vec&lt;u8&gt; = vec![];
let greenlight_credentials = GreenlightCredentials {
    developer_key,
    developer_cert,
};

let node_config = NodeConfig::Greenlight {
    config: GreenlightNodeConfig {
        partner_credentials: Some(greenlight_credentials),
        invite_code: None,
    },
};</code></pre>
</section>
<div slot="title">Swift</div>
<section>
<pre><code class="language-swift ignore">// Read in your Greenlight credentials from the file 
// system, environment variable or build config
let developerKey = [UInt8]()
let developerCert = [UInt8]()
let greenlightCredentials = GreenlightCredentials(developerKey: developerKey, developerCert: developerCert)

let nodeConfig = NodeConfig.greenlight(
    config: GreenlightNodeConfig(partnerCredentials: greenlightCredentials, inviteCode: nil))
</code></pre>
</section>
<div slot="title">Kotlin</div>
<section>
<pre><code class="language-kotlin ignore">// Read in your Greenlight credentials from the file 
// system, environment variable or build config
val developerKey = emptyList&lt;UByte&gt;()
val developerCert = emptyList&lt;UByte&gt;()
val greenlightCredentials = GreenlightCredentials(developerKey, developerCert)

val nodeConfig = NodeConfig.Greenlight(GreenlightNodeConfig(greenlightCredentials, null))
</code></pre>
</section>
<div slot="title">React Native</div>
<section>
<pre><code class="language-typescript">// Read in your Greenlight credentials from the file
// system, environment variable or build config
const developerKey: number[] = []
const developerCert: number[] = []
const greenlightCredentials: GreenlightCredentials = {
  developerKey,
  developerCert
}

const nodeConfig: NodeConfig = {
  type: NodeConfigVariant.GREENLIGHT,
  config: {
    partnerCredentials: greenlightCredentials
  }
}
</code></pre>
</section>
<div slot="title">Dart</div>
<section>
<pre><code class="language-dart ignore">// Read in your Greenlight credentials from the file 
// system, environment variable or build config
Uint8List developerKey = Uint8List(0);
Uint8List developerCert = Uint8List(0);
GreenlightCredentials greenlightCredentials = GreenlightCredentials(
  developerKey: developerKey, 
  developerCert: developerCert,
);

NodeConfig nodeConfig = NodeConfig.greenlight(
  config: GreenlightNodeConfig(
    partnerCredentials: greenlightCredentials,
    inviteCode: null,
  ),
);
</code></pre>
</section>
<div slot="title">Python</div>
<section>
<pre><code class="language-python ignore"># Read in your Greenlight credentials from the file 
# system, environment variable or build config
developer_key = []
developer_cert = []
greenlight_credentials = breez_sdk.GreenlightCredentials(
    developer_key=developer_key,
    developer_cert=developer_cert)

node_config = breez_sdk.NodeConfig.GREENLIGHT(
    config=breez_sdk.GreenlightNodeConfig(
        partner_credentials=greenlight_credentials,
        invite_code=None))
</code></pre>
</section>
<div slot="title">Go</div>
<section>
<pre><code class="language-go ignore">// Read in your Greenlight credentials from the file
// system, environment variable or build config
developerKey := []uint8{}
developerCert := []uint8{}
greenlightCredentials := breez_sdk.GreenlightCredentials{
    DeveloperKey:  developerKey,
    DeveloperCert: developerCert,
}

nodeConfig := breez_sdk.NodeConfigGreenlight{
    Config: breez_sdk.GreenlightNodeConfig{
        PartnerCredentials: &amp;greenlightCredentials,
        InviteCode:         nil,
    },
}
</code></pre>
</section>
<div slot="title">C#</div>
<section>
<pre><code class="language-cs ignore">// Read in your Greenlight credentials from the file 
// system, environment variable or build config
var developerKey = new List&lt;byte&gt;();
var developerCert = new List&lt;byte&gt;();
var greenlightCredentials = new GreenlightCredentials(developerKey, developerCert);

var nodeConfig = new NodeConfig.Greenlight(
    new GreenlightNodeConfig(greenlightCredentials, null)
);
</code></pre>
</section>
</custom-tabs>
<p>To obtain a certificate for a production environment, please register <a href="https://greenlight.blockstream.com/">here</a> and make sure to notify your LSP(s).</p>
<h2 id="applying-certificates"><a class="header" href="#applying-certificates">Applying certificates</a></h2>
<p>The certificates received from Blockstream should be contained with a zip file. Within the zip file should be a <code>.crt</code> and a <code>.pem</code> file, these are the certificate and private key files. To use these files with the Breez SDK each file needs to be read as binary/byte data, inserting the <code>.crt</code> data as the developer cert and the <code>.pem</code> data as the developer key.</p>
<div class="warning">
<h4 id="developer-note"><a class="header" href="#developer-note">Developer note</a></h4>
Leave the file contents as is, manipulating the file contents will result in transport errors. 
<ul>
<li><b>Do not</b> strip the headers and footers from the file contents<br/>(<code>BEGIN CERTIFICATE</code> / <code>END CERTIFICATE</code> / <code>BEGIN PRIVATE KEY</code> / <code>END PRIVATE KEY</code>)</li>
<li><b>Do not</b> use only part of the certificate</li>
</ul>
</div>
<h2 id="production-checklist"><a class="header" href="#production-checklist">Production checklist</a></h2>
<p>There are some use cases where you need to verify that they are implemented correctly. Here is a checklist you can use to verify that your application is production ready.</p>
<ul>
<li>
<p><strong>Add logging</strong>: Add sufficient logging into your application to diagnose any issues users are having. For more information: <a href="logging.html">Adding logging</a>.</p>
</li>
<li>
<p><strong>Handle closed channels</strong>: Make sure you allow your users to redeem their onchain balance in case their channels were closed. For more information: <a href="closed_channels.html">Handling channel closures</a>.</p>
</li>
<li>
<p><strong>Display pending payments</strong>: Payments always contain a status field that can be used to determine if the payment was completed or not. Make sure you handle the case where the payment is still pending by showing the correct status to the user.</p>
</li>
<li>
<p><strong>Enable swaps refunds</strong>: Swaps that are the result of <a href="receive_onchain.html">Receiving an On-Chain Transaction</a> may not be completed and change to <code>Refundable</code> state. Make sure you handle this case correctly by allowing the user to retry the <a href="receive_onchain.html#refund-a-swap">refund</a> with different fees as long as the refund is not confirmed. A confirmed refund changes the swap status from <code>Refundable</code> to <code>Completed</code>.</p>
</li>
<li>
<p><strong>Expose swap fees</strong>: When sending or receiving on-chain, make sure to clearly show the expected fees involved, as well as the send / receive amounts.</p>
</li>
<li>
<p><strong>Connect on-demand</strong>: Create a Lightning node (connect) only when users are interested to receive payments with Lightning (not on the app startup).</p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guide/failure_report.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../notifications/getting_started.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guide/failure_report.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../notifications/getting_started.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../tabs.js"></script>


    </div>
    </body>
</html>
